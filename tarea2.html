<!DOCTYPE html>
<html lang="en">
<head>
	<title>Avo - Free Bootstrap 4 Template by Colorlib</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	
	<link href="https://fonts.googleapis.com/css?family=Nunito+Sans:200,300,400,600,700,800,900&display=swap" rel="stylesheet">

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

	<link rel="stylesheet" href="css/animate.css">
	
	<link rel="stylesheet" href="css/owl.carousel.min.css">
	<link rel="stylesheet" href="css/owl.theme.default.min.css">
	<link rel="stylesheet" href="css/magnific-popup.css">
	
	<link rel="stylesheet" href="css/flaticon.css">
	<link rel="stylesheet" href="css/style.css">


	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	<script src="https://d3js.org/d3.v3.min.js"></script>
	<script>
		var d3v3 = window.d3;
		window.d3 = null;
	</script>
	<!--<script src="/js/tarea2_readfile.js"></script>-->


	<style>
		body {
		  font: 10px sans-serif;
		}
		
		.axis path,
		.axis line {
		  fill: none;
		  stroke: #000;
		  shape-rendering: crispEdges;
		}	
	</style>


</head>
<body>
	
	<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
		<div class="container">
			
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
				<span class="oi oi-menu"></span> Menu
			</button>

			<div class="collapse navbar-collapse" id="ftco-nav">
				<ul class="navbar-nav ml-auto">
					<li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
					<li class="nav-item"><a href="tarea1.html" class="nav-link">Tarea 1</a></li>
					<li class="nav-item active"><a href="tarea2.html" class="nav-link">Tarea 2</a></li>
					<li class="nav-item"><a href="tarea3.html" class="nav-link">Tarea 3</a></li>
					<li class="nav-item"><a href="contact.html" class="nav-link">Contact</a></li>
				</ul>
			</div>
		</div>
	</nav>
	<!-- END nav -->

	<section class="hero-wrap hero-wrap-2 degree-right" style="background-image: url('images/bg_5.jpg');" data-stellar-background-ratio="0.5">
		<div class="overlay"></div>
		<div class="container">
			<div class="row no-gutters slider-text js-fullheight align-items-end">
				<div class="col-md-9 ftco-animate pb-5 mb-5">
					<p class="breadcrumbs"><span class="mr-2"><a href="index.html">Home <i class="fa fa-chevron-right"></i></a></span> <span>Tarea 2 <i class="fa fa-chevron-right"></i></span></p>
					<h1 class="mb-3 bread">Tarea 2</h1>
				</div>
			</div>
		</div>
	</section>

	<section class="ftco-section ftco-portfolio">
		<div class="row justify-content-center no-gutters">
			<div class="col-md-12 heading-section text-center ftco-animate mb-5">
				<h2 class="mb-2">Tarea 2</h2>
			</div>
		</div>
		
		<div class="container">
			<section>
				
				<div class="datavizMap" id="datavizMap">
					<!-- Initialize a select button -->
					<select id="selectButton"></select>
					<svg></svg>
				</div>
			</section>

			<div class="dataviz" id="dataviz">
				<svg></svg>
			</div>
			<div class="dataviz2" id="dataviz2">
				<svg></svg>
			</div>
 
			<!--Estilos-->
			<style>
				@import url(https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300|Josefin+Slab|Arvo|Lato|Vollkorn|Abril+Fatface|Old+Standard+TT|Droid+Sans|Lobster|Inconsolata|Montserrat|Playfair+Display|Karla|Alegreya|Libre+Baskerville|Merriweather|Lora|Archivo+Narrow|Neuton|Signika|Questrial|Fjalla+One|Bitter|Varela+Round);
				
				.background {
				  fill: #eee;
				  pointer-events: all;
				}
				
				.map-layer {
				  fill: #fff;
				  stroke: #aaa;
				}
				
				.effect-layer{
				  pointer-events:none;
				}
				
				text{
				  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
				  font-weight: 300;
				}
				
				text.big-text{
				  font-size: 30px;
				  font-weight: 400;
				}
				
				.effect-layer text, text.dummy-text{
				  font-size: 12px;
				}				
			</style>


			<script>

				//-----------------------------------------------------------------------------------------------------------------------------------
				//MAPA
				var widthMap = 960,
				heightMap = 500,
				centeredMap;

				var isElementSelected = false;
				var elementSelected;
				var cantElements = 10;

				// Define color scale
				var colorMap = d3v3.scale.linear()
				.domain([1, 20])
				.clamp(true)
				.range(['#fff', '#409A99']);

				var projectionMap = d3v3.geo.mercator()
				
				// Center the Map in Colombia
				.center([-74.1, 4.65])
				.translate([widthMap / 2, heightMap / 2])
				.scale(75000);

				var pathMap = d3v3.geo.path().projection(projectionMap);

				// Set svg width & height
				var svgMap = d3v3.select(".datavizMap > svg")
				.attr("width",widthMap)  // apply width,height to svg
				.attr("height",heightMap);

				svgMap.append('rect')
				.attr('class', 'background')
				.attr('width', widthMap)
				.attr('height', heightMap)
				;
				
				var gMap = svgMap.append('g');

				var mapLayer = gMap.append('g')
				.classed('map-layer', true);

				var dummyTextMap = gMap.append('text')
				.classed('dummy-text', true)
				.attr('x', 10)
				.attr('y', 30)
				.style('opacity', 0);

				var dummyText2Map = gMap.append('text')
				.classed('dummy-text', true)
				.attr('x', 10)
				.attr('y', 50)
				.style('opacity', 0);

				var dummyTextMap_selected = gMap.append('text')
				.classed('dummy-text', true)
				.attr('x', widthMap-250)
				.attr('y', 30)
				.style('opacity', 0);

				var dummyTextMap_destination = gMap.append('text')
				.classed('dummy-text', true)
				.attr('x', widthMap-250)
				.attr('y', heightMap-100)
				.style('opacity', 0);


				// List of groups (here I have one group per column)
    			var allGroup = ["a単o 1", "a単o 2", "a単o 3"];

				//-------------------------------------------COMBOX------------------------------------------------------------
				// add the options to the button
				d3v3.select("#selectButton")
				.selectAll('myOptions')
					.data(allGroup)
				.enter()
					.append('option')
				.text(function (d) { return d; }) // text showed in the menu
				.attr("value", function (d) { return d; }) // corresponding value returned

				d3v3.select("#selectButton").on("change", function(d) {
				// recover the option that has been chosen
				var selectedOption = d3v3.select(this).property("value")
				// run the updateChart function with this selected option
				
				updateCharts(selectedOption.replace("a単o ",""),(elementSelected.properties.UPlCodigo).replace("UPZ","a"),cantElements)

				
    			});


				//------------------------------------------------------------------------------------------------------------




				d3v3.json("https://gist.githubusercontent.com/leonalejandro/e9d061963a65cfd4e26da33fd6df38b5/raw/b9984a536fb2cc490965ea82f327574a289c79b0/zonas_luti.json", 
				function(err, mapData) { 

					var features = mapData.features;

					// Update color scale domain based on data
					colorMap.domain([0, d3v3.max(features, nameLength)]);

					// Draw each province as a path
					mapLayer.selectAll('path')
						.data(features)
						.enter().append('path')
						.attr('d', pathMap)
						.attr('vector-effect', 'non-scaling-stroke')
						.on('mouseover', mouseoverMap)
						.on('mouseout', mouseoutMap)
						.on('click', clickedMap);

				});

				// Get province name
				function nameFn(d){
				return d && d.properties ? d.properties.UPlNombre : null;
				}

				// Get upz
				function upzFn(d){
				return d && d.properties ? d.properties.UPlCodigo : null;
				}

				// Get province name length
				function nameLength(d){
					var n = nameFn(d);
					return n ? n.length : 0;
				}

				function mouseoverMap(d){
					if(d!=elementSelected){
						// Highlight hovered province
						d3v3.select(this).style('fill', 'orange');
						dummyTextMap.style('opacity', 1);
						dummyText2Map.style('opacity', 1);
						// Draw effects
						textArt(nameFn(d),upzFn(d));
					}
					
				}

				function mouseoutMap(d){
					if (d != elementSelected){
						// Highlight hovered province
						dummyTextMap.style('opacity', 0);
						dummyText2Map.style('opacity', 0);
						d3v3.select(this).style('fill', 'white');
					}

					

				}

				// When clicked, zoom in
				function clickedMap(d) {

					if(d === elementSelected){
						isElementSelected = false;
						dummyTextMap_selected.style('opacity', 0);
					}
					else {
						elementSelected = d;
						isElementSelected = true;

						dummyTextMap_selected.style('opacity', 1);
						textArtSelected(nameFn(d),upzFn(d));
					}

					
					

					
					var x, y, k;

					// Compute centroid of the selected path
					if (d && centeredMap !== d) {
						var centroid = pathMap.centroid(d);
						x = centroid[0];
						y = centroid[1];
						k = 4;
						centeredMap = d;
					} else {
						x = widthMap / 2;
						y = heightMap / 2;
						k = 1;
						centeredMap = null;
					}

					// Highlight the clicked province
					mapLayer.selectAll('path')
						.style('fill', function(d){return centeredMap && d===centeredMap ? '#D5708B' : fillFn(d);});

						/*
					// Zoom
					gMap.transition()
						.duration(750)
						.attr('transform', 'translate(' + widthMap / 2 + ',' + heightMap / 2 + ')scale(' + k + ')translate(' + -x + ',' + -y + ')');

						*/



						updateCharts(0,(d.properties.UPlCodigo).replace("UPZ","a"),10);
				}


				function getElementAreaByUPZName(upz){
					console.log(upz);
					upz = upz.replace("a","UPZ");
					console.log(upz);
					var arrayMap = mapLayer.selectAll('path');
					arrayMap.style("fill",function(d){
						if(d.properties.UPlCodigo === upz){
							dummyTextMap_destination.style('opacity', 1);
							textArtDestination(nameFn(d),upzFn(d));
							return '#8A2BE2';
						}
						else {
							return fillFn(d);
						}
					});
					
				}

				function textArtDestination(text1, text2){
					var textAux = text1+" ("+text2+")";
					dummyTextMap_destination.text(textAux);
				}

				function textArt(text1, text2){
					dummyTextMap.text(text1);
					dummyText2Map.text(text2);
				}

				function textArtSelected(text1, text2){
					var textAux = text1+" ("+text2+")";
					dummyTextMap_selected.text(textAux);
				}

				// Get province color
				function fillFn(d){
					if(d.properties.UPlCodigo === elementSelected.properties.UPlCodigo){
						return "#D5708B";
					}
					//return color(nameLength(d));
				}

				function updateCharts(anio,upz,cantidad){
					getData(anio,upz,cantidad);
				}


				//-----------------------------------------------------------------------------------------------------------------------------------
				//GRAFICOS DE BARRAS
				var url_data = "https://gist.githubusercontent.com/leonalejandro/7611d6f3bf05cd4624427185d10c7ecc/raw/2f680f5f36e78f8fcfb4c21f4f4d2e587e7b2934/Co2_Emissions.json";

				var margin = {top: 80, right: 20, bottom: 20, left: 50},
					width = (960 - margin.left - margin.right),
					height = 700 - margin.top - margin.bottom;
				
				var y = d3v3.scale.ordinal()
					.rangeRoundBands([0, height], .3);
				
				var x = d3v3.scale.linear()
					.rangeRound([0, width]);
				
				var xAxis = d3v3.svg.axis()
					.scale(x)
					.tickFormat(d3v3.format(","))
					.orient("top");
				
				var yAxis = d3v3.svg.axis()
					.scale(y)
					.tickSize(0)
					.orient("left");
				
				var color = d3v3.scale.ordinal()
					//.range(["#d73027","#f46d43","#fdae61","#a6d96a","#66bd63","#1a9850"]);
					.range(["#66bd63","#1a9850"]);

				function compareItems1(a, b) {
					if (a.co2_car_peak + a.co2_tm_peak < b.co2_car_peak + b.co2_tm_peak) return 1;
					if (b.co2_car_peak + b.co2_tm_peak < a.co2_car_peak + a.co2_tm_peak) return -1;
					return 0;
				}

				function compareItems2(a, b) {
					if (a.co2_tm_opeak + a.co2_car_opeak < b.co2_tm_opeak + b.co2_car_opeak) return 1;
					if (b.co2_tm_opeak + b.co2_car_opeak < a.co2_tm_opeak + a.co2_car_opeak) return -1;
					return 0;
				}



				var getData = (anio, zona, top) => {

					axios.get(url_data).then((response) => {

						cont = 0;

						var misDatos = [];

						for (var i = 0; i < response.data.length; i++) {
							
							if(response.data[i].zi == zona && response.data[i].anio == anio){
								var datonuevo = {};
								datonuevo["rows"] = response.data[i].zj;
								datonuevo["co2_tm_opeak"] = response.data[i].co2_tm_opeak;
								datonuevo["co2_tm_peak"] = response.data[i].co2_tm_peak;
								datonuevo["co2_car_peak"] = response.data[i].co2_car_peak;
								datonuevo["co2_car_opeak"] = response.data[i].co2_car_opeak;
															
								misDatos.push(datonuevo);
							}
						}

						var datos1 = [];
						var datos2 = [];

						for (var i = 0 ; i<misDatos.length;i++){
							var datonuevo1 = {};
							var datonuevo2 = {};
							
							datonuevo1["rows"] = misDatos[i].rows;
							datonuevo1["co2_tm_opeak"] = misDatos[i].co2_tm_opeak;
							datonuevo1["co2_car_opeak"] = misDatos[i].co2_car_opeak;
							datos1.push(datonuevo1);

							datonuevo2["rows"] = misDatos[i].rows;
							datonuevo2["co2_tm_peak"] = misDatos[i].co2_tm_peak;
							datonuevo2["co2_car_peak"] = misDatos[i].co2_car_peak;
							datos2.push(datonuevo2);
						}

						
						datos1 = datos1.sort(compareItems2);
						datos2 = datos2.sort(compareItems1);


						generateviz1(datos1.slice(0,top));	
						generateviz2(datos2.slice(0,top));					
					})




					var data_aux = [];
					var elem1 = {rows: "zona 1", "Not at all" : 0.0414678,"Strongly disagree":4.3254,"Disagree":0.00193076,"Agree":0.198604,"Strongly agree":0.2,"Absolutely":0.3};
					var elem2 = {rows: "zona 2", "Not at all" : 169,"Strongly disagree":73,"Disagree":299,"Agree":836,"Strongly agree":309,"Absolutely":824};
					var elem3 = {rows: "zona 3", "Not at all" : 435,"Strongly disagree":430,"Disagree":188,"Agree":601,"Strongly agree":619,"Absolutely":615};
					var elem4 = {rows: "zona 4", "Not at all" : 2,"Strongly disagree":543,"Disagree":165,"Agree":252,"Strongly agree":994,"Absolutely":787};
					var elem5 = {rows: "zona 5", "Not at all" : 970,"Strongly disagree":396,"Disagree":14,"Agree":540,"Strongly agree":794,"Absolutely":391};
					var elem6 = {rows: "zona 6", "Not at all" : 616,"Strongly disagree":115,"Disagree":792,"Agree":947,"Strongly agree":735,"Absolutely":441};
					var elem7 = {rows: "zona 7", "Not at all" : 339,"Strongly disagree":389,"Disagree":294,"Agree":557,"Strongly agree":494,"Absolutely":278};
					var elem8 = {rows: "zona 8", "Not at all" : 378,"Strongly disagree":203,"Disagree":319,"Agree":842,"Strongly agree":314,"Absolutely":105};
					var elem9 = {rows: "zona 9", "Not at all" : 789,"Strongly disagree":686,"Disagree":487,"Agree":54,"Strongly agree":396,"Absolutely":456};
					var elem10 = {rows: "zona 10", "Not at all" : 81,"Strongly disagree":176,"Disagree":536,"Agree":392,"Strongly agree":91,"Absolutely":943};		
					var elem11 = {rows: "zona 11", "Not at all" : 201.44,"Strongly disagree":402.2334,"Disagree":524.654,"Agree":730.665,"Strongly agree":965.666,"Absolutely":519.78};
			

					data_aux.push(elem1);
					data_aux.push(elem2);
					data_aux.push(elem3);
					data_aux.push(elem4);
					data_aux.push(elem5);
					data_aux.push(elem6);
					data_aux.push(elem7);
					data_aux.push(elem8);
					data_aux.push(elem9);
					data_aux.push(elem10);
					data_aux.push(elem11);

					//console.log(data_aux);
					//generateviz(data_aux);
				}




				var generateviz1 = (data) => {


				  d3v3.select("#dataviz > svg").remove(); 

				  var svg = d3v3.select(".dataviz")
				   .append("svg")
					.attr("width", width + margin.left + margin.right)
					.attr("height", height + margin.top + margin.bottom)
				  	.append("g")
					.attr("transform", "translate(" + margin.left + "," + margin.top + ")");


				  var rateNames = d3v3.keys(data[0]).filter(function(key) { return key !== "rows"; });
				  var rowsNames = data.map(function(d) { return d.rows; });
				  var neutralIndex = Math.floor(rateNames.length/2);					

				  color.domain(rateNames);
				  
				  data.forEach(function(row) {					
					row.total = d3v3.sum(rateNames.map(function(name) { return +row[name]; }));				
					rateNames.forEach(function(name) { row['relative'+name] = (row.total !==0 ? +row[name] : 0); });
				
					var x0 = -1 * d3v3.sum(rateNames.map(function(name,i) { return i < neutralIndex ? +row['relative'+name] : 0; }));
					if (rateNames.length & 1) x0 += -1 * row['relative' + rateNames[neutralIndex] ]/2;   
					
					row.boxes = rateNames.map(function(name) { 
					  return {name: name, x0: x0, x1: x0 += row['relative'+name], total: row.total, absolute: row[name]}; 
					});
				  });
				
				  var min = d3v3.min(data, function(d) { return d.boxes["0"].x0; });
				  var max = d3v3.max(data, function(d) { return d.boxes[d.boxes.length-1].x1; });


				// tooltips

				//Create a tooltip
				var Tooltip = d3v3.select('#dataviz')
					.append('div')
					.attr("class", "tooltip")
					.style('position', 'absolute')
					.style('background-color', 'rgba(255,255,255,0.8)')
					.style('border-radius', '5px')
					.style('padding', '5px')
					.style('opacity', 0)
					.style("font-family", "Tahoma, Geneva, sans-serif")
					.style("font-size", "12pt");
					
					function mouseover(){
						d3v3.select(this).select('rect').style('opacity', '0.5');
						Tooltip
						.style('opacity', 1)
						.style('box-shadow', '5px 5px 5px rgba(0,0,0,0.2)');

					}
					function mousemove(){
						var d = d3v3.select(this).data()[0]
						Tooltip
						.html('Year ' + d.absolute + ': ' + d.absolute)
						.style("left", (d3v3.mouse(this)[0]+30) + "px")
						.style("top", (d3v3.event.pageY-580) + "px");
						//console.log(d3v3.event.pageY);
					}
					function mouseout(){
						d3v3.select(this).select('rect').style('opacity', '1');
						Tooltip.style("opacity", 0);
					}

				// When clicked, zoom in
				function clickedBar1() {
					var d = d3v3.select(this).data()[0];
					getElementAreaByUPZName(d.rows);
				}
				
				  x.domain([min, max]).nice();
				  y.domain(rowsNames);
				
				  svg.append("g")
					 .attr("class", "x axis")
					 .call(xAxis);
				
				  svg.append("g")
					 .attr("class", "y axis")
					 .call(yAxis);
				
				  var rows = svg.selectAll(".row")
					  .data(data)
					  .enter().append("g")
					  .attr("class", "bar")
					  .attr("transform", function(d) { return "translate(0," + y(d.rows) + ")"; })
					  
					  .on('mouseover', mouseover)
        			  .on('mousemove', mousemove)
					  .on('mouseout', mouseout)
					  .on('click', clickedBar1)
					 
					 
					 
					  /*.on("mouseover", function(d) {
						svg.selectAll('.y').selectAll('text').filter(function(text) { return text===d.rows; })
							.transition().duration(100).style('font','15px sans-serif');
						
						



					  })
					  .on("mouseout", function(d) {
						svg.selectAll('.y').selectAll('text').filter(function(text) { return text===d.rows; })
							.transition().duration(100).style('font','10px sans-serif');

						
						
					  })*/;
				
				  var bars = rows.selectAll("rect")
					.data(function(d) { return d.boxes; })
					.enter().append("g").attr("class", "barra")
					//.on('mouseover', mouseover)
        			//.on('mousemove', mousemove)
        			//.on('mouseout', mouseout);
				


					  
				  bars.append("rect")
					  .attr("height", y.rangeBand())
					  .attr("x", function(d) { return x(d.x0); })
					  .attr("width", function(d) { return x(d.x1) - x(d.x0); })
					  .style("fill", function(d) { return color(d.name); });
				
				  /*bars.append("text")
					.attr("x", function(d) { return x(d.x0); })
					.attr("y", y.rangeBand()/2)
					.attr("dy", "0.5em")
					.attr("dx", "0.5em")
					.style("text-anchor", "begin")
					.text(function(d) { return d.absolute !== 0 && (d.x1-d.x0)>0.04 ? d.absolute : "" });
				*/

				  svg.append("g")
					  .attr("class", "y axis")
					.append("line")
					  .attr("x1", x(0))
					  .attr("x2", x(0))
					  .attr("y2", height);
				
				  var legend = svg.selectAll(".legend")
					  .data(rateNames)
					.enter().append("g")
					  .attr("class", "legend")
					  .attr("transform", function(d, i) { return "translate(" + width/rateNames.length * i + ",-55)"; });
				
				  legend.append("rect")
						.attr("x", 0)
						.attr("width", 18)
						.attr("height", 18)
						.style("fill", color);
				
				  legend.append("text")
						.attr("x", 22)
						.attr("y", 9)
						.attr("dy", ".35em")
						.style("text-anchor", "begin")
						.text(function(d) { return d; });
				
				};








				var generateviz2 = (data) => {

					d3v3.select("#dataviz2 > svg").remove(); 

					var svg2 = d3v3.select(".dataviz2")
					.append("svg")
					.attr("width", width + margin.left + margin.right)
					.attr("height", height + margin.top + margin.bottom)
				  	.append("g")
					.attr("transform", "translate(" + margin.left + "," + margin.top + ")");


				  var rateNames = d3v3.keys(data[0]).filter(function(key) { return key !== "rows"; });
				  var rowsNames = data.map(function(d) { return d.rows; });
				  var neutralIndex = Math.floor(rateNames.length/2);					

				  color.domain(rateNames);
				  
				  data.forEach(function(row) {
					row.total = d3v3.sum(rateNames.map(function(name) { return +row[name]; }));				
					rateNames.forEach(function(name) { row['relative'+name] = (row.total !==0 ? +row[name] : 0); });
				
					var x0 = -1 * d3v3.sum(rateNames.map(function(name,i) { return i < neutralIndex ? +row['relative'+name] : 0; }));
					if (rateNames.length & 1) x0 += -1 * row['relative' + rateNames[neutralIndex] ]/2;   

					row.boxes = rateNames.map(function(name) { 
					  return {name: name, x0: x0, x1: x0 += row['relative'+name], total: row.total, absolute: row[name]}; 
					});
				  });
				
				  var min = d3v3.min(data, function(d) { return d.boxes["0"].x0; });
				  var max = d3v3.max(data, function(d) { return d.boxes[d.boxes.length-1].x1; });
				
				  x.domain([min, max]).nice();
				  y.domain(rowsNames);
				
				  svg2.append("g")
					 .attr("class", "x axis")
					 .call(xAxis);
				
				  svg2.append("g")
					 .attr("class", "y axis")
					 .call(yAxis);
				
				  var rows = svg2.selectAll(".row")
					  .data(data)
					.enter().append("g")
					  .attr("class", "bar")
					  .attr("transform", function(d) { return "translate(0," + y(d.rows) + ")"; })
					  .on("mouseover", function(d) {
						svg2.selectAll('.y').selectAll('text').filter(function(text) { return text===d.rows; })
							.transition().duration(100).style('font','15px sans-serif');
					  })
					  .on("mouseout", function(d) {
						svg2.selectAll('.y').selectAll('text').filter(function(text) { return text===d.rows; })
							.transition().duration(100).style('font','10px sans-serif');
					  });
				
				var bars = rows.selectAll("rect")
					  .data(function(d) { return d.boxes; })
					  .enter().append("g").attr("class", "barra")
					  .on("mouseover", function(d) {
						d3v3.select(this).select('rect').style('opacity', '0.5');
					   })
					  .on("mouseout", function(d) {
						d3v3.select(this).select('rect').style('opacity', '1');
					  });
				
				  bars.append("rect")
					  .attr("height", y.rangeBand())
					  .attr("x", function(d) { return x(d.x0); })
					  .attr("width", function(d) { return x(d.x1) - x(d.x0); })
					  .style("fill", function(d) { return color(d.name); });
				
					  /*
				  bars.append("text")
					.attr("x", function(d) { return x(d.x0); })
					.attr("y", y.rangeBand()/2)
					.attr("dy", "0.5em")
					.attr("dx", "0.5em")
					.style("text-anchor", "begin")
					.text(function(d) { return d.absolute !== 0 && (d.x1-d.x0)>0.04 ? d.absolute : "" });
				*/

				  svg2.append("g")
					  .attr("class", "y axis")
					.append("line")
					  .attr("x1", x(0))
					  .attr("x2", x(0))
					  .attr("y2", height);
				
				  var legend = svg2.selectAll(".legend")
					  .data(rateNames)
					.enter().append("g")
					  .attr("class", "legend")
					  .attr("transform", function(d, i) { return "translate(" + width/rateNames.length * i + ",-55)"; });
				
				  legend.append("rect")
						.attr("x", 0)
						.attr("width", 18)
						.attr("height", 18)
						.style("fill", color);
				
				  legend.append("text")
						.attr("x", 22)
						.attr("y", 9)
						.attr("dy", ".35em")
						.style("text-anchor", "begin")
						.text(function(d) { return d; });
				
				};

				
				getData(0,"a4",10);
				</script>



			<div class="row mt-5 py-md-5">
				<div class="col text-center">
					<div class="block-27">
					</div>
				</div>
			</div>
			
		
		</div>
	</section>

	

	<footer class="ftco-footer ftco-section">
		<div class="degree-footer-top"></div>
		<div class="container">
			<div class="row mb-5">
				<div class="col-md">
					<div class="ftco-footer-widget mb-4">
						<h2 class="ftco-heading-2">avo</h2>
						<p>Far far away, behind the word mountains, far from the countries.</p>
						<ul class="ftco-footer-social list-unstyled mt-5">
							<li class="ftco-animate"><a href="#"><span class="fa fa-twitter"></span></a></li>
							<li class="ftco-animate"><a href="#"><span class="fa fa-facebook"></span></a></li>
							<li class="ftco-animate"><a href="#"><span class="fa fa-instagram"></span></a></li>
						</ul>
					</div>
				</div>
				<div class="col-md">
					<div class="ftco-footer-widget mb-4 ml-md-4">
						<h2 class="ftco-heading-2">Community</h2>
						<ul class="list-unstyled">
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Projects</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Team</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Reviews</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>FAQs</a></li>
						</ul>
					</div>
				</div>
				<div class="col-md">
					<div class="ftco-footer-widget mb-4 ml-md-4">
						<h2 class="ftco-heading-2">About Us</h2>
						<ul class="list-unstyled">
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Our Story</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Meet the team</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Careers</a></li>
						</ul>
					</div>
				</div>
				<div class="col-md">
					<div class="ftco-footer-widget mb-4">
						<h2 class="ftco-heading-2">Company</h2>
						<ul class="list-unstyled">
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>About Us</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Press</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Contact</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Careers</a></li>
						</ul>
					</div>
				</div>
				<div class="col-md">
					<div class="ftco-footer-widget mb-4">
						<h2 class="ftco-heading-2">Have a Questions?</h2>
						<div class="block-23 mb-3">
							<ul>
								<li><span class="icon fa fa-map"></span><span class="text">203 Fake St. Mountain View, San Francisco, California, USA</span></li>
								<li><a href="#"><span class="icon fa fa-phone"></span><span class="text">+2 392 3929 210</span></a></li>
								<li><a href="#"><span class="icon fa fa-envelope pr-4"></span><span class="text">info@yourdomain.com</span></a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12 text-center">
					
					<p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
						Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
						<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
					</div>
				</div>
			</div>
		</footer>
		
		

		<!-- loader -->
		<div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>


		<script src="js/jquery.min.js"></script>
		<script src="js/jquery-migrate-3.0.1.min.js"></script>
		<script src="js/popper.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/jquery.easing.1.3.js"></script>
		<script src="js/jquery.waypoints.min.js"></script>
		<script src="js/jquery.stellar.min.js"></script>
		<script src="js/owl.carousel.min.js"></script>
		<script src="js/jquery.magnific-popup.min.js"></script>
		<script src="js/jquery.animateNumber.min.js"></script>
		<script src="js/scrollax.min.js"></script>
		<script src="js/main.js"></script>
		
	</body>
	</html>